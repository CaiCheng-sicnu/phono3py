<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Auxiliary tools &#8212; Phono3py v.1.11.11</title>
    
    <link rel="stylesheet" href="_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootswatch-3.3.6/cosmo/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.11.11',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="How to cite phono3py" href="citation.html" />
    <link rel="prev" title="Tips" href="tips.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body role="document">

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html">
          Phono3py</a>
        <span class="navbar-text navbar-version pull-left"><b>1.11.11</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="install.html#system-requirement">System requirement</a></li>
<li class="toctree-l2"><a class="reference internal" href="install.html#multithreading-support">Multithreading support</a></li>
<li class="toctree-l2"><a class="reference internal" href="install.html#install-using-pip-conda">Install using pip/conda</a></li>
<li class="toctree-l2"><a class="reference internal" href="install.html#building-using-setup-py">Building using setup.py</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="interfaces.html">Interfaces to calculators (VASP, pwscf, CRYSTAL, Abinit)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="vasp.html">VASP &amp; phono3py calculation</a></li>
<li class="toctree-l2"><a class="reference internal" href="pwscf.html">Pwscf &amp; phono3py calculation</a></li>
<li class="toctree-l2"><a class="reference internal" href="crystal.html">CRYSTAL &amp; phono3py calculation</a></li>
<li class="toctree-l2"><a class="reference internal" href="interfaces.html#calculator-specific-behaviors">Calculator specific behaviors</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="command-options.html">Command options and setting tags</a><ul>
<li class="toctree-l2"><a class="reference internal" href="command-options.html#calculator-interface">Calculator interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="command-options.html#force-constants">Force constants</a></li>
<li class="toctree-l2"><a class="reference internal" href="command-options.html#reciprocal-space-sampling-mesh-and-grid-points">Reciprocal space sampling mesh and grid points</a></li>
<li class="toctree-l2"><a class="reference internal" href="command-options.html#brillouin-zone-integration">Brillouin zone integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="command-options.html#physical-properties">Physical properties</a></li>
<li class="toctree-l2"><a class="reference internal" href="command-options.html#input-and-output-file-names">Input and output file names</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="output-files.html">Output files</a><ul>
<li class="toctree-l2"><a class="reference internal" href="output-files.html#intermediate-text-files">Intermediate text files</a></li>
<li class="toctree-l2"><a class="reference internal" href="output-files.html#hdf5-files">HDF5 files</a></li>
<li class="toctree-l2"><a class="reference internal" href="output-files.html#simple-text-file">Simple text file</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="hdf5_howto.html">How to read the results stored in hdf5 files</a><ul>
<li class="toctree-l2"><a class="reference internal" href="hdf5_howto.html#how-to-use-hdf5-python-library">How to use HDF5 python library</a></li>
<li class="toctree-l2"><a class="reference internal" href="hdf5_howto.html#details-of-kappa-hdf5-file">Details of <code class="docutils literal"><span class="pre">kappa-*.hdf5</span></code> file</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="workload-distribution.html">Workload distribution</a><ul>
<li class="toctree-l2"><a class="reference internal" href="workload-distribution.html#how-to-do-it">How to do it</a></li>
<li class="toctree-l2"><a class="reference internal" href="workload-distribution.html#a-convenient-script">A convenient script</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tips.html">Tips</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tips.html#brillouin-zone-summation">Brillouin zone summation</a></li>
<li class="toctree-l2"><a class="reference internal" href="tips.html#numerical-quality-of-force-constants">Numerical quality of force constants</a></li>
<li class="toctree-l2"><a class="reference internal" href="tips.html#to-reduce-computational-demands">To reduce computational demands</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Auxiliary tools</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#kaccum"><code class="docutils literal"><span class="pre">kaccum</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#kdeplot"><code class="docutils literal"><span class="pre">kdeplot</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="citation.html">How to cite phono3py</a><ul>
<li class="toctree-l2"><a class="reference internal" href="citation.html#citation-of-phono3py">Citation of phono3py</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Change Log</a><ul>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#mar-31-2017-version-1-11-11">Mar-31-2017: version 1.11.11</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#feb-9-2017-version-1-11-9">Feb-9-2017: version 1.11.9</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#dec-14-2016-version-1-11-7">Dec-14-2016: version 1.11.7</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#nov-27-2016-version-1-11-5">Nov-27-2016: version 1.11.5</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#apr-24-2016-version-1-10-9">Apr-24-2016: version 1.10.9</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#apr-16-2016-version-1-10-7">Apr-16-2016: version 1.10.7</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#mar-15-2016-version-1-10-5">Mar-15-2016: version 1.10.5</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#oct-10-2015-version-0-9-14">Oct-10-2015: version 0.9.14</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#sep-26-2015-version-0-9-13">Sep-26-2015: version 0.9.13</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#aug-12-2015-version-0-9-12">Aug-12-2015: version 0.9.12</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#jun-18-2015-version-0-9-10-1">Jun-18-2015: version 0.9.10.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#jun-17-2015-version-0-9-10">Jun-17-2015: version 0.9.10</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#changes-in-version-0-9-7">Changes in version 0.9.7</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#changes-in-version-0-9-6">Changes in version 0.9.6</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#changes-in-version-0-9-5">Changes in version 0.9.5</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#changes-in-version-0-9-4">Changes in version 0.9.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#changes-in-version-0-8-11">Changes in version 0.8.11</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#changes-in-version-0-8-10">Changes in version 0.8.10</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#changes-in-version-0-8-2">Changes in version 0.8.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#changes-in-version-0-8-0">Changes in version 0.8.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#changes-in-version-0-7-6">Changes in version 0.7.6</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#changes-in-version-0-7-2">Changes in version 0.7.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#changes-in-version-0-7-1">Changes in version 0.7.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#changes-in-version-0-6-0">Changes in version 0.6.0</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Auxiliary tools</a><ul>
<li><a class="reference internal" href="#kaccum"><code class="docutils literal"><span class="pre">kaccum</span></code></a><ul>
<li><a class="reference internal" href="#how-to-use-kaccum">How to use <code class="docutils literal"><span class="pre">kaccum</span></code></a></li>
<li><a class="reference internal" href="#general-option">General option</a><ul>
<li><a class="reference internal" href="#pa"><code class="docutils literal"><span class="pre">--pa</span></code></a></li>
<li><a class="reference internal" href="#c"><code class="docutils literal"><span class="pre">-c</span></code></a></li>
<li><a class="reference internal" href="#pwscf"><code class="docutils literal"><span class="pre">--pwscf</span></code></a></li>
<li><a class="reference internal" href="#crystal"><code class="docutils literal"><span class="pre">--crystal</span></code></a></li>
<li><a class="reference internal" href="#temperature"><code class="docutils literal"><span class="pre">--temperature</span></code></a></li>
<li><a class="reference internal" href="#nsp"><code class="docutils literal"><span class="pre">--nsp</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#kaccum-for-tensor-properties"><code class="docutils literal"><span class="pre">kaccum</span></code> for tensor properties</a><ul>
<li><a class="reference internal" href="#mfp"><code class="docutils literal"><span class="pre">--mfp</span></code></a></li>
<li><a class="reference internal" href="#gv"><code class="docutils literal"><span class="pre">--gv</span></code></a></li>
<li><a class="reference internal" href="#average"><code class="docutils literal"><span class="pre">--average</span></code></a></li>
<li><a class="reference internal" href="#trace"><code class="docutils literal"><span class="pre">--trace</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#kaccum-for-scalar-properties"><code class="docutils literal"><span class="pre">kaccum</span></code> for scalar properties</a><ul>
<li><a class="reference internal" href="#gamma"><code class="docutils literal"><span class="pre">--gamma</span></code></a></li>
<li><a class="reference internal" href="#tau"><code class="docutils literal"><span class="pre">--tau</span></code></a></li>
<li><a class="reference internal" href="#cv"><code class="docutils literal"><span class="pre">--cv</span></code></a></li>
<li><a class="reference internal" href="#gv-norm"><code class="docutils literal"><span class="pre">--gv_norm</span></code></a></li>
<li><a class="reference internal" href="#pqj"><code class="docutils literal"><span class="pre">--pqj</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#kdeplot"><code class="docutils literal"><span class="pre">kdeplot</span></code></a><ul>
<li><a class="reference internal" href="#option">Option</a><ul>
<li><a class="reference internal" href="#id2"><code class="docutils literal"><span class="pre">--temperature</span></code></a></li>
<li><a class="reference internal" href="#nbins"><code class="docutils literal"><span class="pre">--nbins</span></code></a></li>
<li><a class="reference internal" href="#cutoff-fmax"><code class="docutils literal"><span class="pre">--cutoff</span></code>, <code class="docutils literal"><span class="pre">--fmax</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="tips.html" title="Previous Chapter: Tips"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Tips</span>
    </a>
  </li>
  <li>
    <a href="citation.html" title="Next Chapter: How to cite phono3py"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">How to cite phono3py &raquo;</span>
    </a>
  </li>
              
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="auxiliary-tools">
<span id="id1"></span><h1>Auxiliary tools<a class="headerlink" href="#auxiliary-tools" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#kaccum" id="id3"><code class="docutils literal"><span class="pre">kaccum</span></code></a><ul>
<li><a class="reference internal" href="#how-to-use-kaccum" id="id4">How to use <code class="docutils literal"><span class="pre">kaccum</span></code></a></li>
<li><a class="reference internal" href="#general-option" id="id5">General option</a></li>
<li><a class="reference internal" href="#kaccum-for-tensor-properties" id="id6"><code class="docutils literal"><span class="pre">kaccum</span></code> for tensor properties</a></li>
<li><a class="reference internal" href="#kaccum-for-scalar-properties" id="id7"><code class="docutils literal"><span class="pre">kaccum</span></code> for scalar properties</a></li>
</ul>
</li>
<li><a class="reference internal" href="#kdeplot" id="id8"><code class="docutils literal"><span class="pre">kdeplot</span></code></a><ul>
<li><a class="reference internal" href="#option" id="id9">Option</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="kaccum">
<span id="auxiliary-tools-kaccum"></span><h2><a class="toc-backref" href="#id3"><code class="docutils literal"><span class="pre">kaccum</span></code></a><a class="headerlink" href="#kaccum" title="Permalink to this headline">¶</a></h2>
<p>Cumulative physical properties with respect to frequency or mean free
path are calculated using this command.</p>
<p>For example, cumulative thermal conductivity is defined by</p>
<div class="math">
<p><img src="_images/math/78174642317d5a6f506b8370599e9323b0187a1c.png" alt="\kappa^\text{c}(\omega) =
 \int^\omega_0 \sum_\lambda
\kappa_\lambda \delta(\omega_\lambda - \omega) d\omega"/></p>
</div><p>where <img class="math" src="_images/math/0be801c2e2457efda8802ba72913b513a8dfde42.png" alt="\kappa_\lambda"/> of phono3py for single-mode RTA is given as</p>
<div class="math">
<p><img src="_images/math/43fe10433ed2da4f438f29e1e2e69ef542053c18.png" alt="\kappa_\lambda =
C_\lambda \mathbf{v}_\lambda \otimes \mathbf{v}_\lambda
\tau_\lambda."/></p>
</div><p>(The notations are found in <a class="reference external" href="http://arxiv.org/abs/1501.00691">http://arxiv.org/abs/1501.00691</a>.)</p>
<div class="section" id="how-to-use-kaccum">
<h3><a class="toc-backref" href="#id4">How to use <code class="docutils literal"><span class="pre">kaccum</span></code></a><a class="headerlink" href="#how-to-use-kaccum" title="Permalink to this headline">¶</a></h3>
<p>Let&#8217;s computer lattice thermal conductivity of Si using the <code class="docutils literal"><span class="pre">Si-PBEsol</span></code>
example found in the example directory.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">%</span> <span class="n">phono3py</span> <span class="o">--</span><span class="n">dim</span><span class="o">=</span><span class="s2">&quot;2 2 2&quot;</span> <span class="o">--</span><span class="n">pa</span><span class="o">=</span><span class="s2">&quot;0 1/2 1/2 1/2 0 1/2 1/2 1/2 0&quot;</span> <span class="o">-</span><span class="n">c</span> <span class="n">POSCAR</span><span class="o">-</span><span class="n">unitcell</span> <span class="o">--</span><span class="n">mesh</span><span class="o">=</span><span class="s2">&quot;11 11 11&quot;</span> <span class="o">--</span><span class="n">sym_fc3r</span> <span class="o">--</span><span class="n">sym_fc2</span> <span class="o">--</span><span class="n">tsym</span> <span class="o">--</span><span class="n">br</span>
</pre></div>
</div>
<p>Then using the output file, <code class="docutils literal"><span class="pre">kappa-m111111.hdf5</span></code>, run <code class="docutils literal"><span class="pre">kaccum</span></code> as follows:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">%</span> <span class="n">kaccum</span> <span class="o">--</span><span class="n">pa</span><span class="o">=</span><span class="s2">&quot;0 1/2 1/2 1/2 0 1/2 1/2 1/2 0&quot;</span> <span class="o">-</span><span class="n">c</span> <span class="n">POSCAR</span><span class="o">-</span><span class="n">unitcell</span> <span class="n">kappa</span><span class="o">-</span><span class="n">m111111</span><span class="o">.</span><span class="n">hdf5</span> <span class="o">|</span><span class="n">tee</span> <span class="n">kaccum</span><span class="o">.</span><span class="n">dat</span>
</pre></div>
</div>
<p>Here <code class="docutils literal"><span class="pre">--pa</span></code> is optional. The definition of <code class="docutils literal"><span class="pre">--pa</span></code> option is same as
<a class="reference internal" href="command-options.html#pa-option"><span class="std std-ref">&#8211;pa, &#8211;primitive_axis: Transformation matrix to primitive cell</span></a>. <code class="docutils literal"><span class="pre">POSCAR-unitcell</span></code> is the unit cell filename that
is specified with <code class="docutils literal"><span class="pre">-c</span></code> option.
<code class="docutils literal"><span class="pre">kappa-m111111.hdf5</span></code> is the output file of thermal conductivity
calculation, which is passed to <code class="docutils literal"><span class="pre">kaccum</span></code> as the first argument.</p>
<p>The format of the output is as follows: The first column gives
frequency in THz, and the second to seventh columns give the
cumulative lattice thermal conductivity of 6 elements, xx, yy, zz, yz,
xz, xy. The eighth to 13th columns give the derivatives. There are
sets of frequencies, which are separated by blank lines. Each set is
for a temperature. There are the groups corresponding to the number of
temperatures calculated.</p>
<p>To plot the output by gnuplot at temperature index 30 that may
correspond to 300 K,</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">%</span> <span class="n">gnuplot</span>
<span class="o">...</span>
<span class="n">gnuplot</span><span class="o">&gt;</span> <span class="n">p</span> <span class="s2">&quot;kaccum.dat&quot;</span> <span class="n">i</span> <span class="mi">30</span> <span class="n">u</span> <span class="mi">1</span><span class="p">:</span><span class="mi">2</span> <span class="n">w</span> <span class="n">l</span><span class="p">,</span> <span class="s2">&quot;kaccum.dat&quot;</span> <span class="n">i</span> <span class="mi">30</span> <span class="n">u</span> <span class="mi">1</span><span class="p">:</span><span class="mi">8</span> <span class="n">w</span> <span class="n">l</span>
</pre></div>
</div>
<p>The plot like below is displayed.</p>
<p><a class="reference internal" href="_images/Si-kaccum.png"><img alt="i0" src="_images/Si-kaccum.png" style="width: 50%;" /></a></p>
</div>
<div class="section" id="general-option">
<h3><a class="toc-backref" href="#id5">General option</a><a class="headerlink" href="#general-option" title="Permalink to this headline">¶</a></h3>
<div class="section" id="pa">
<h4><code class="docutils literal"><span class="pre">--pa</span></code><a class="headerlink" href="#pa" title="Permalink to this headline">¶</a></h4>
<p>See <a class="reference internal" href="command-options.html#pa-option"><span class="std std-ref">&#8211;pa, &#8211;primitive_axis: Transformation matrix to primitive cell</span></a>.</p>
</div>
<div class="section" id="c">
<h4><code class="docutils literal"><span class="pre">-c</span></code><a class="headerlink" href="#c" title="Permalink to this headline">¶</a></h4>
<p>Unit cell filename is specified with this option, e.g., <code class="docutils literal"><span class="pre">-c</span>
<span class="pre">POSCAR-unitcell</span></code>.</p>
</div>
<div class="section" id="pwscf">
<h4><code class="docutils literal"><span class="pre">--pwscf</span></code><a class="headerlink" href="#pwscf" title="Permalink to this headline">¶</a></h4>
<p>Let <code class="docutils literal"><span class="pre">kaccum</span></code> read a Pwscf unit cell file with <code class="docutils literal"><span class="pre">-c</span></code> option, for example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">kaccum</span> <span class="o">--</span><span class="n">pwscf</span> <span class="o">--</span><span class="n">pa</span><span class="o">=</span><span class="s2">&quot;0 1/2 1/2 1/2 0 1/2 1/2 1/2 0&quot;</span> <span class="o">-</span><span class="n">c</span> <span class="n">Si</span><span class="o">.</span><span class="ow">in</span> <span class="o">--</span><span class="n">temperature</span><span class="o">=</span><span class="mi">300</span> <span class="n">kappa</span><span class="o">-</span><span class="n">m191919</span><span class="o">.</span><span class="n">hdf5</span>
</pre></div>
</div>
<p><a class="reference internal" href="_images/Si-kaccum-pwscf.png"><img alt="ipwscf" src="_images/Si-kaccum-pwscf.png" style="width: 25%;" /></a></p>
</div>
<div class="section" id="crystal">
<h4><code class="docutils literal"><span class="pre">--crystal</span></code><a class="headerlink" href="#crystal" title="Permalink to this headline">¶</a></h4>
<p>Analogous to <code class="docutils literal"><span class="pre">--pwscf</span></code>, but to be used with the CRYSTAL interface.</p>
</div>
<div class="section" id="temperature">
<h4><code class="docutils literal"><span class="pre">--temperature</span></code><a class="headerlink" href="#temperature" title="Permalink to this headline">¶</a></h4>
<p>Pick up one temperature point. For example, <code class="docutils literal"><span class="pre">--temperature=300</span></code> for
300 K, which works only if thermal conductivity is calculated at
temperatures including 300 K.</p>
</div>
<div class="section" id="nsp">
<h4><code class="docutils literal"><span class="pre">--nsp</span></code><a class="headerlink" href="#nsp" title="Permalink to this headline">¶</a></h4>
<p>Number of points to be sampled in the x-axis.</p>
</div>
</div>
<div class="section" id="kaccum-for-tensor-properties">
<h3><a class="toc-backref" href="#id6"><code class="docutils literal"><span class="pre">kaccum</span></code> for tensor properties</a><a class="headerlink" href="#kaccum-for-tensor-properties" title="Permalink to this headline">¶</a></h3>
<p>Number of columns of output data is 13 as explained above. With
<code class="docutils literal"><span class="pre">--average</span></code> and <code class="docutils literal"><span class="pre">--trace</span></code> options, number of columns of output
data becomes 3.</p>
<div class="section" id="mfp">
<h4><code class="docutils literal"><span class="pre">--mfp</span></code><a class="headerlink" href="#mfp" title="Permalink to this headline">¶</a></h4>
<p>Mean free path is used instead of frequency for the x-axis. The unit
of MFP is Angstrom.</p>
<p>The figure below shows the results of Si example with the
<img class="math" src="_images/math/b5c72848cf3d020d1b16e90cbee13bd89d380c03.png" alt="19\times 19\times 19"/> and <img class="math" src="_images/math/18e04e5fddb80c3fc65c247206bcb73124793c4d.png" alt="11\times 11\times 11"/> sampling
meshes used for the lattice thermal conductivity calculation. They look
differently. Especially for the result of the <img class="math" src="_images/math/952dd8ebb0d39f1f4fab2a1b9066c46e0edf76c9.png" alt="11\times 11\times
11"/> sampling mesh, the MFP seems converging but we can see it&#8217;s not
true to look at that of the <img class="math" src="_images/math/b5c72848cf3d020d1b16e90cbee13bd89d380c03.png" alt="19\times 19\times 19"/> sampling
mesh. To show this type of plot, be careful about the sampling mesh
convergence.</p>
<p><a class="reference internal" href="_images/Si-kaccum-MFP.png"><img alt="iMFP" src="_images/Si-kaccum-MFP.png" style="width: 50%;" /></a></p>
<p>(This plot is based on the <code class="docutils literal"><span class="pre">Si-PBEsol</span></code> example.)</p>
</div>
<div class="section" id="gv">
<h4><code class="docutils literal"><span class="pre">--gv</span></code><a class="headerlink" href="#gv" title="Permalink to this headline">¶</a></h4>
<p>Outer product of group velocities <img class="math" src="_images/math/c6c1ba531df59e04f0943a34006ed2abb340d2cf.png" alt="\mathbf{v}_\lambda \otimes
\mathbf{v}_\lambda"/> (in THz^2 x Angstrom^2)</p>
</div>
<div class="section" id="average">
<h4><code class="docutils literal"><span class="pre">--average</span></code><a class="headerlink" href="#average" title="Permalink to this headline">¶</a></h4>
<p>Output the traces of the tensors divided by 3 rather than the unique
elements.</p>
</div>
<div class="section" id="trace">
<h4><code class="docutils literal"><span class="pre">--trace</span></code><a class="headerlink" href="#trace" title="Permalink to this headline">¶</a></h4>
<p>Output the traces of the tensors rather than the unique elements.</p>
</div>
</div>
<div class="section" id="kaccum-for-scalar-properties">
<h3><a class="toc-backref" href="#id7"><code class="docutils literal"><span class="pre">kaccum</span></code> for scalar properties</a><a class="headerlink" href="#kaccum-for-scalar-properties" title="Permalink to this headline">¶</a></h3>
<p>For the following properties, those intensities are normalized by
the number of grid points. Number of columns of output data is three,
frequency, cumulative property, and derivative of cumulative property
such like DOS.</p>
<div class="section" id="gamma">
<h4><code class="docutils literal"><span class="pre">--gamma</span></code><a class="headerlink" href="#gamma" title="Permalink to this headline">¶</a></h4>
<p><img class="math" src="_images/math/d9ec9488bdf3c60f32c84b18c0a7b988ed1a1de8.png" alt="\Gamma_\lambda(\omega_\lambda)"/> (in THz)</p>
</div>
<div class="section" id="tau">
<h4><code class="docutils literal"><span class="pre">--tau</span></code><a class="headerlink" href="#tau" title="Permalink to this headline">¶</a></h4>
<p>Lifetime <img class="math" src="_images/math/de30f6199e123594b62fc135fe5090b3583dc4e5.png" alt="\tau_\lambda = \frac{1}{2\Gamma_\lambda(\omega_\lambda)}"/> (in ps)</p>
</div>
<div class="section" id="cv">
<h4><code class="docutils literal"><span class="pre">--cv</span></code><a class="headerlink" href="#cv" title="Permalink to this headline">¶</a></h4>
<p>Modal heat capacity <img class="math" src="_images/math/01a917c69235798a7673ef6843616c6c21b9fc94.png" alt="C_\lambda"/> (in eV/K)</p>
</div>
<div class="section" id="gv-norm">
<h4><code class="docutils literal"><span class="pre">--gv_norm</span></code><a class="headerlink" href="#gv-norm" title="Permalink to this headline">¶</a></h4>
<p>Absolute value of group velocity <img class="math" src="_images/math/7c4dd3d097d33250b84ce0d410dce04a2467a629.png" alt="|\mathbf{v}_\lambda|"/> (in
THz x Angstrom)</p>
</div>
<div class="section" id="pqj">
<h4><code class="docutils literal"><span class="pre">--pqj</span></code><a class="headerlink" href="#pqj" title="Permalink to this headline">¶</a></h4>
<p>Averaged phonon-phonon interaction <img class="math" src="_images/math/02108fb0196bec37d8f582e21bf5db60149a19d3.png" alt="P_{\mathbf{q}j}"/> (in eV^2)</p>
</div>
</div>
</div>
<div class="section" id="kdeplot">
<span id="auxiliary-tools-kdeplot"></span><h2><a class="toc-backref" href="#id8"><code class="docutils literal"><span class="pre">kdeplot</span></code></a><a class="headerlink" href="#kdeplot" title="Permalink to this headline">¶</a></h2>
<p><strong>This script is under the development and may contain bugs.</strong> But a
feature is briefly introduced below since it may be useful. Scipy is
needed to use this script.</p>
<p>This script plots distribution of phonon modes in the
frequency-lifetime plane. Its density is estimated using Gaussian-KDE
using <a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.gaussian_kde.html">scipy</a>.</p>
<p><code class="docutils literal"><span class="pre">kdeplot</span></code> reads a result of the thermal conductivity calculation as
the first argument:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">%</span> <span class="n">kdeplot</span> <span class="o">--</span><span class="n">nbins</span><span class="o">=</span><span class="mi">200</span> <span class="n">kappa</span><span class="o">-</span><span class="n">m191919</span><span class="o">.</span><span class="n">hdf5</span>
</pre></div>
</div>
<p>(This may take long time. On a relatively fast machine, it took 20 mins.)
After finishing the calculation, the plot is saved in
<code class="docutils literal"><span class="pre">lifetime.png</span></code>. The black dots show the phonon modes. The density is
estimated from these dots. The drawing area is automatically set to
make look good, e.g, higher lifetime side is not drawn if the density
is negligible.</p>
<p><a class="reference internal" href="_images/Si-kdeplot.png"><img alt="ikde" src="_images/Si-kdeplot.png" style="width: 50%;" /></a></p>
<p>(This plot is based on the <code class="docutils literal"><span class="pre">Si-PBEsol</span></code> example.)</p>
<div class="section" id="option">
<h3><a class="toc-backref" href="#id9">Option</a><a class="headerlink" href="#option" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id2">
<h4><code class="docutils literal"><span class="pre">--temperature</span></code><a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h4>
<p>Pick up one temperature point. For example, <code class="docutils literal"><span class="pre">--temperature=300</span></code> for
300 K, which works only if thermal conductivity is calculated at
temperatures including 300 K.</p>
<p>Without specifying this option, the 31st temperature index is
chosen. This often corresponds to 300 K if phono3py ran without
setting temperature range and step.</p>
</div>
<div class="section" id="nbins">
<h4><code class="docutils literal"><span class="pre">--nbins</span></code><a class="headerlink" href="#nbins" title="Permalink to this headline">¶</a></h4>
<p>This option controls the resolution of the density plot. The default
value is 100.</p>
</div>
<div class="section" id="cutoff-fmax">
<h4><code class="docutils literal"><span class="pre">--cutoff</span></code>, <code class="docutils literal"><span class="pre">--fmax</span></code><a class="headerlink" href="#cutoff-fmax" title="Permalink to this headline">¶</a></h4>
<p>The option <code class="docutils literal"><span class="pre">--cutoff</span></code> (<code class="docutils literal"><span class="pre">--fmax</span></code>) sets the maximum value of
lifetime (frequency) to be included as data points. Normally increasing
this value from the chosen value without specifying this option
does nothing since automatic control of drawing area cut high lifetime
(frequency) side if the density is low.</p>
</div>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
        <br/>
        
<div id="sourcelink">
  <a href="_sources/auxiliary-tools.rst.txt"
     rel="nofollow">Source</a>
</div>
      
    </p>
    <p>
        &copy; Copyright 2015, Atsushi Togo.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.5.4.<br/>
    </p>
  </div>
</footer>
  </body>
</html>